<ion-header>
    <ion-navbar>
        <ion-title>
            Editar Perfil
        </ion-title>
        <ion-buttons end>
            <button ion-button clear (click)="closeModal()">
                Fechar
            </button>
        </ion-buttons>            
    </ion-navbar>
</ion-header>
<ion-content padding>
    <form (submitt)="editaPerfil()">
        <ion-slides #mySlider>
            <ion-slide>
                <ion-list>
                    <ion-list-header>Dados Pessoais</ion-list-header>
                    <ion-item>
                        <ion-label stacked>Nome Completo</ion-label>
                        <ion-input type="text" name="nome" [(ngModel)]="usuario.nomeCompleto"></ion-input>
                    </ion-item>
                    <ion-item>
                        <ion-label stacked>Documento</ion-label>
                        <ion-input type="text" name="documento" [(ngModel)]="usuario.documento"></ion-input>
                    </ion-item>
                    <ion-item>
                        <ion-label float>Segmentos</ion-label>
                        <ion-select [(ngModel)]="usuario.segmento" multiple="false" name="segmentos" okText="OK" cancelText="Cancelar">
                        <ion-option *ngFor="let segmento of segmentos" [value]="segmento">{{segmento.nome}}</ion-option>
                        </ion-select>
                    </ion-item>
                    <ion-item>
                        <ion-label stacked>Descrição</ion-label>
                        <ion-textarea rows="4" type="text" name="descricao" [(ngModel)]="usuario.descricao"></ion-textarea>
                    </ion-item>
                    <ion-item>
                        <ion-label>Trocar Senha</ion-label>
                        <ion-checkbox name="trocaSenha"></ion-checkbox>
                    </ion-item>
                    <ion-item [hidden]='!trocaSenha'>
                        <ion-label stacked>Senha Atual</ion-label>
                        <ion-input type="password" name="senha" [(ngModel)]="usuario.userPassword" ></ion-input>
                    </ion-item>
                    <ion-item [hidden]='!trocaSenha'>
                        <ion-label stacked>Nova Senha</ion-label>
                        <ion-input type="password" name="senha" [(ngModel)]="novaSenha" ></ion-input>
                    </ion-item>
                </ion-list>
                <div *ngIf="usuario.tipo == 'E'">
                    <ion-buttons end padding-top>
                        <button ion-button block icon-right type="button" (click)="proximo()">
                            Próximo
                            <ion-icon name="arrow-forward"></ion-icon>
                        </button>           
                    </ion-buttons>
                </div>
                <div *ngIf="usuario.tipo == 'V'">
                    <ion-buttons end padding-top>
                        <button ion-button block icon-right type="submit" (click)="editaPerfil(trocaSenha)">
                            Cadastrar
                            <ion-icon name="arrow-forward"></ion-icon>
                        </button>           
                    </ion-buttons>
                </div>
            </ion-slide>

            <ion-slide *ngIf="usuario.tipo == 'E'">
                <ion-list>
                    <ion-list-header>Endereço</ion-list-header>
                    <ion-item>
                        <ion-label stacked>CEP</ion-label>
                        <ion-input type="number" name="cep" [(ngModel)]="usuario.endCep"></ion-input>
                    </ion-item>
                    <ion-item>
                        <ion-label>País</ion-label>
                        <ion-select [(ngModel)]="usuario.endPais" multiple="false" name="pais" okText="OK" cancelText="Cancelar">
                        <ion-option *ngFor="let pais of paises" [value]="pais">{{pais.nome}}</ion-option>
                        </ion-select>
                    </ion-item>
                    <ion-item>
                        <ion-label>Estado</ion-label>
                        <ion-select [(ngModel)]="usuario.endEstado" multiple="false" name="estado" okText="OK" cancelText="Cancelar">
                        <ion-option *ngFor="let estado of estados" [value]="estado">{{estado.nome}}</ion-option>
                        </ion-select>
                    </ion-item>
                    <ion-item>
                        <ion-label>Cidade</ion-label>
                        <ion-select [(ngModel)]="usuario.endCidade" multiple="false" name="cidade" okText="OK" cancelText="Cancelar">
                        <ion-option *ngFor="let cidade of cidades" [value]="pais">{{cidade.nome}}</ion-option>
                        </ion-select>
                    </ion-item>
                    <ion-item>
                        <ion-label stacked>Bairro</ion-label>
                        <ion-input type="text" name="bairro" [(ngModel)]="usuario.endBairro"></ion-input>
                    </ion-item>
                    <ion-item>
                        <ion-label stacked>Logradouro</ion-label>
                        <ion-input type="text" name="logradouro" [(ngModel)]="usuario.endLogradouro"></ion-input>
                    </ion-item>
                    <ion-item>
                        <ion-label stacked>Número</ion-label>
                        <ion-input type="number" name="numero" [(ngModel)]="usuario.endNumero"></ion-input>
                    </ion-item>
                    <ion-item>
                        <ion-label stacked>Complemento</ion-label>
                        <ion-input type="text" name="complemento" [(ngModel)]="usuario.endComplemento"></ion-input>
                    </ion-item>
                    <ion-buttons end padding-top>
                        <button ion-button block icon-right type="submit" (click)="editaPerfil()">
                            Cadastrar
                            <ion-icon name="arrow-forward"></ion-icon>
                        </button>           
                    </ion-buttons>
                </ion-list>
            </ion-slide>
        </ion-slides>
    </form>
</ion-content>